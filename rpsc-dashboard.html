<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>RPSC Dashboard - GyaanSetu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background:
        radial-gradient(circle at top, #e0f2fe 0, #f5f7fa 45%, #eef2ff 100%);
      min-height: 100vh;
      color: #0f172a;
    }

    /* HEADER */
    .header {
      background: linear-gradient(120deg, #2563eb 0%, #1d4ed8 35%, #7c3aed 75%, #f97316 100%);
      color: white;
      padding: 18px 32px;
      box-shadow: 0 16px 40px rgba(15,23,42,0.55);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      border-bottom: 1px solid rgba(191,219,254,0.8);
    }

    .header h1 {
      font-size: 24px;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .header h1::before {
      content: "üèõÔ∏è";
      font-size: 20px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 14px;
    }

    .header-right span {
      padding: 6px 14px;
      border-radius: 999px;
      background: radial-gradient(circle at top left, rgba(15,23,42,0.7), rgba(30,64,175,0.25));
      border: 1px solid rgba(191,219,254,0.8);
      box-shadow: 0 8px 22px rgba(15,23,42,0.45);
    }

    .logout-btn {
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.6));
      color: #111827;
      padding: 8px 20px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.95);
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(15,23,42,0.45);
    }

    .logout-btn::before {
      content: "‚èèÔ∏è";
      font-size: 14px;
    }

    .logout-btn:hover {
      background: rgba(255,255,255,1);
      color: #111827;
      box-shadow: 0 14px 32px rgba(15,23,42,0.55);
      transform: translateY(-1px);
    }

    /* MAIN CONTAINER + ROW GRID */
    .container {
      max-width: 1400px;
      margin: 24px auto 40px;
      padding: 0 20px 40px;
      position: relative;
    }

    .section-row {
      display: grid;
      grid-template-columns: minmax(0,1fr) minmax(0,1fr);
      gap: 22px;
      margin-bottom: 26px;
      position: relative;
    }

    /* attractive vertical separator between two halves */
    .section-row.two-col::after {
      content: "";
      position: absolute;
      inset: 0 50%;
      transform: translateX(-50%);
      width: 2px;
      max-width: 2px;
      background: linear-gradient(to bottom, transparent, rgba(148,163,184,0.6), transparent);
      pointer-events: none;
    }

    /* SECTION CARD (glassy) */
    .section-card {
      background: radial-gradient(circle at top left,
                  rgba(255,255,255,0.96),
                  rgba(255,255,255,0.88));
      padding: 22px 22px 20px;
      border-radius: 18px;
      box-shadow:
        0 20px 55px rgba(15,23,42,0.16),
        inset 0 0 0 1px rgba(255,255,255,0.6);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      position: relative;
      overflow: hidden;
      border-left: 4px solid rgba(59,130,246,0.55);
    }

    .section-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        radial-gradient(circle at top right, rgba(59,130,246,0.16), transparent 55%),
        radial-gradient(circle at bottom left, rgba(16,185,129,0.15), transparent 55%);
      opacity: 0.95;
      pointer-events: none;
    }

    .section-card-inner {
      position: relative;
      z-index: 1;
    }

    .section-card.section-accent-green {
      border-left-color: rgba(34,197,94,0.8);
    }

    .section-card.section-accent-purple {
      border-left-color: rgba(147,51,234,0.85);
    }

    .section-card.section-accent-orange {
      border-left-color: rgba(249,115,22,0.9);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
    }

    .section-header h2 {
      font-size: 16px;
      color: #111827;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
    }

    .section-header h2 span.icon {
      font-size: 20px;
    }

    .section-header span {
      font-size: 12px;
      color: #6b7280;
    }

    .center-title {
      justify-content: center;
      text-align: center;
    }

    /* COUNTDOWN */
    .exam-countdown {
      background: linear-gradient(135deg, #6366f1 0%, #0ea5e9 35%, #22c55e 70%, #eab308 100%);
      color: white;
      padding: 24px 24px 22px;
      border-radius: 22px;
      box-shadow: 0 30px 70px rgba(15,23,42,0.55);
      margin-bottom: 26px;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(191,219,254,0.9);
    }

    .exam-countdown::after {
      content: "";
      position: absolute;
      right: -45px;
      bottom: -40px;
      width: 180px;
      height: 180px;
      border-radius: 999px;
      background: rgba(255,255,255,0.21);
      filter: blur(3px);
    }

    .exam-countdown::before {
      content: "";
      position: absolute;
      left: -60px;
      top: -60px;
      width: 220px;
      height: 220px;
      border-radius: 999px;
      background: radial-gradient(circle at center, rgba(255,255,255,0.25), transparent 65%);
    }

    .exam-countdown h2 {
      font-size: 20px;
      margin-bottom: 6px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }

    .exam-subtitle {
      font-size: 13px;
      opacity: 0.96;
      margin-bottom: 15px;
    }

    .countdown-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 15px;
      margin: 15px 0 8px;
    }

    .countdown-item {
      background: rgba(15,23,42,0.22);
      padding: 12px;
      border-radius: 12px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.35);
      box-shadow: 0 10px 26px rgba(15,23,42,0.45);
    }

    .countdown-item .title {
      font-size: 13px;
      margin-bottom: 6px;
      font-weight: 600;
    }

    .countdown-item .number {
      font-size: 24px;
      font-weight: 800;
    }

    .countdown-item .label {
      font-size: 12px;
      opacity: 0.9;
    }

    .quote {
      font-style: italic;
      margin-top: 10px;
      font-size: 14px;
      opacity: 0.98;
    }

    /* Update progress */
    .update-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .update-box {
      background: rgba(249,250,251,0.98);
      border-radius: 12px;
      padding: 14px 16px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 6px 18px rgba(148,163,184,0.3);
    }

    .update-box label {
      display: block;
      margin-bottom: 6px;
      color: #4b5563;
      font-size: 13px;
      font-weight: 600;
    }

    .update-box input {
      width: 100%;
      padding: 9px 11px;
      border-radius: 8px;
      border: 2px solid #e5e7eb;
      font-size: 14px;
      background: white;
      transition: border-color 0.15s ease, box-shadow 0.15s ease;
    }

    .update-box input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.22);
    }

    .update-actions {
      display: flex;
      align-items: flex-end;
      justify-content: flex-start;
    }

    /* BUTTONS */
    .btn {
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 40%, #22c55e 100%);
      color: white;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: box-shadow 0.16s ease, transform 0.16s ease;
    }

    .btn:hover {
      box-shadow: 0 10px 24px rgba(37,99,235,0.45);
      transform: translateY(-1px);
    }

    .btn-telegram {
      background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 50%, #0369a1 100%);
      padding: 12px 20px;
      font-size: 15px;
      width: 100%;
      text-align: center;
    }

    .btn-telegram:hover {
      box-shadow: 0 10px 22px rgba(14,165,233,0.45);
    }

    .btn-folder {
      display: inline-flex;
      padding: 9px 18px;
      background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 40%, #22c55e 100%);
      color: white;
      border-radius: 999px;
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .btn-folder::before {
      content: "üìÇ";
    }

    .btn-folder:hover {
      box-shadow: 0 10px 22px rgba(37,99,235,0.45);
      transform: translateY(-1px);
    }

    /* Totals + small stats */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 16px;
    }

    .stat-card {
      background: #f9fafb;
      padding: 14px 16px;
      border-radius: 14px;
      box-shadow: 0 4px 14px rgba(148,163,184,0.4);
      border-left: 4px solid #3b82f6;
    }

    .stat-card:nth-child(2) {
      border-left-color: #22c55e;
    }

    .stat-card:nth-child(3) {
      border-left-color: #f97316;
    }

    .stat-card h3 {
      color: #4b5563;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 6px;
    }

    .stat-card .number {
      font-size: 22px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 4px;
    }

    .stat-card .meta {
      font-size: 11px;
      color: #6b7280;
    }

    .empty-state {
      text-align: center;
      padding: 24px 10px;
      color: #9ca3af;
      font-size: 13px;
    }

    .list {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .list-item {
      font-size: 13px;
      color: #111827;
      padding: 8px;
      background: #f9fafb;
      border-radius: 6px;
      border-left: 3px solid #3b82f6;
    }

    .list-item.new {
      background: #e0edff;
      font-weight: 600;
    }

    .tag {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 11px;
      background: #fca5a5;
      color: #7f1d1d;
      margin-left: 6px;
      font-weight: 600;
    }

    /* Material sections */
    .material-section-title {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 10px;
      font-weight: 600;
      text-align: center;
    }

    /* SYLLABUS TRACKER */
    .syllabus-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
      gap: 18px;
      margin-top: 6px;
    }

    .syllabus-box {
      background: #f9fafb;
      border-radius: 12px;
      padding: 12px 14px;
      border: 1px solid #e5e7eb;
    }

    .syllabus-title {
      font-size: 13px;
      font-weight: 600;
      color: #111827;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6 0%, #22c55e 100%);
      width: 0%;
    }

    /* Performance small stats */
    .mini-stat-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
    }

    .mini-stat {
      background: #f9fafb;
      border-radius: 10px;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
    }

    .mini-stat h4 {
      font-size: 12px;
      color: #4b5563;
      margin-bottom: 4px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .mini-stat .value {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
    }

    .mini-stat .hint {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    /* Community & Help Section */
    .community-help-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .community-box {
      background: linear-gradient(135deg, #0ea5e9 0%, #0369a1 100%);
      color: white;
      padding: 24px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 12px 32px rgba(8,47,73,0.35);
    }

    .community-box h3 {
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .community-box p {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 15px;
      line-height: 1.5;
    }

    .community-box .btn-telegram {
      margin-top: 8px;
    }

    .help-box {
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color: white;
      padding: 24px;
      border-radius: 16px;
      text-align: center;
      box-shadow: 0 12px 32px rgba(6,95,70,0.35);
    }

    .help-box h3 {
      font-size: 16px;
      margin-bottom: 10px;
      font-weight: 600;
    }

    .help-box p {
      font-size: 13px;
      opacity: 0.9;
      margin-bottom: 8px;
      line-height: 1.5;
    }

    .help-box .email {
      font-size: 14px;
      font-weight: 600;
      margin-top: 10px;
      padding: 12px;
      background: rgba(255,255,255,0.15);
      border-radius: 10px;
      word-break: break-all;
    }

    .help-box .email a {
      color: white;
      text-decoration: none;
    }

    .help-box .email a:hover {
      text-decoration: underline;
    }

    @media (max-width: 900px) {
      .section-row {
        grid-template-columns: minmax(0,1fr);
      }
      .section-row.two-col::after {
        display: none;
      }
    }

    @media (max-width: 640px) {
      .header {
        padding: 14px 16px;
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      .container {
        padding: 0 14px 30px;
      }
      .section-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }
      .community-help-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyFiEVyWCStmdOxaSz2AAboplrOXAJn0XuW614KRzLihSL60qL8zy3GEgBVvm0DQPcmQg/exec';

    // RPSC folder links (Drive ‚Äì account B)
    const RPSC_FOLDER_LINKS = {
      testSeries:  'https://drive.google.com/drive/folders/11X-00tsQAVPbfLkYB2E00idYPRE85dyq?usp=sharing',
      pyqPapers:   'https://drive.google.com/drive/folders/1DXZRKwh0cbAt5qq4hCX-pp7YCWBw3InN?usp=sharing',
      books:       'https://drive.google.com/drive/folders/1WIyjXfe5_FFH6a-4B4ttaVuiR5I2V2vN?usp=sharing',
      chartsMaps:  'https://drive.google.com/drive/folders/1LJHQrMVnKIINewJC-EK2rPWDgFiQzkwQ?usp=sharing',
      notesPdfs:   'https://drive.google.com/drive/folders/1tw30jBEB9vKKoRrITrNfXa_kzj-wIdyk?usp=sharing',
      otherState:  'https://drive.google.com/drive/folders/1OcmyTEx74vik5fNQJqGgEIm_ClRZB3QD?usp=sharing'
    };

    // RPSC-focused quotes
    const rpscQuotes = [
      'Aaj likhi gayi har answer practice, kal Mains copy par clarity banegi.',
      'Classroom me khade hone ka sapna, aaj ke disciplined self-study se poora hoga.',
      'Rajasthan GK ka ek-ek page aapko interview panel ke sawalon se bachata hai.',
      'Jo candidate roj thoda likhta hai, wahi paper me pura likh paata hai.',
      'Ek extra mock test aaj, merit list me ek extra step upar kal.'
    ];

    // Access guard: only logged-in RPSC users
    (function guardAccess() {
      const exam = localStorage.getItem('exam');
      const userId = localStorage.getItem('userId');

      if (!exam || !userId || exam !== 'RPSC') {
        window.location.href = 'index.html';
      }
    })();

    function loadDailyQuote() {
      const todayKey = new Date().toISOString().slice(0, 10);
      const stored = localStorage.getItem('rpscQuote');
      let quote;

      if (stored) {
        try {
          const parsed = JSON.parse(stored);
          if (parsed.date === todayKey) {
            quote = parsed.text;
          }
        } catch (e) {}
      }

      if (!quote) {
        quote = rpscQuotes[Math.floor(Math.random() * rpscQuotes.length)];
        localStorage.setItem('rpscQuote', JSON.stringify({ date: todayKey, text: quote }));
      }

      document.getElementById('dailyQuote').textContent = quote;
    }

    // Countdown (placeholder fixed values)
    function updateCountdown() {
      document.getElementById('daysRas').textContent = 168;
      document.getElementById('daysG1').textContent = 148;
      document.getElementById('daysG2').textContent = 190;
    }

    function logout() {
      if (confirm('Logout from GyaanSetu?')) {
        localStorage.removeItem('userId');
        localStorage.removeItem('name');
        localStorage.removeItem('exam');
        window.location.href = 'index.html';
      }
    }

    // STUDY PROGRESS
    function updateProgress(e) {
      e.preventDefault();

      const userId = localStorage.getItem('userId');
      const exam = localStorage.getItem('exam');

      if (!userId || !exam) {
        alert('Session expired. Please login again.');
        window.location.href = 'index.html';
        return;
      }

      const hours = parseFloat(document.getElementById('studyHours').value) || 0;
      const topics = parseInt(document.getElementById('topicsCovered').value || '0', 10);
      const mocks = parseInt(document.getElementById('mockTests').value || '0', 10);

      const url = `${SCRIPT_URL}?action=logStudy`
        + `&userId=${encodeURIComponent(userId)}`
        + `&exam=${encodeURIComponent(exam)}`
        + `&hours=${encodeURIComponent(hours)}`
        + `&topics=${encodeURIComponent(topics)}`
        + `&mocks=${encodeURIComponent(mocks)}`;

      fetch(url)
        .then(r => r.json())
        .then(data => {
          if (!data.success) {
            throw new Error(data.message || 'Failed to save study log');
          }
          const totalsUrl = `${SCRIPT_URL}?action=getStudyTotals`
            + `&userId=${encodeURIComponent(userId)}`
            + `&exam=${encodeURIComponent(exam)}`;
          return fetch(totalsUrl).then(r => r.json());
        })
        .then(totals => {
          if (totals && totals.success) {
            document.getElementById('totalHours').textContent = totals.totalHours || 0;
            document.getElementById('totalTopics').textContent = totals.totalTopics || 0;
            document.getElementById('totalTests').textContent = totals.totalMocks || 0;
          }
          alert('Progress updated successfully!');
          document.getElementById('progressForm').reset();
        })
        .catch(err => {
          console.error('Update progress error:', err);
          alert('Error updating progress. Please try again.');
        });
    }

    function loadTotals() {
      const userId = localStorage.getItem('userId');
      const exam = localStorage.getItem('exam');
      if (!userId || !exam) return;

      const totalsUrl = `${SCRIPT_URL}?action=getStudyTotals`
        + `&userId=${encodeURIComponent(userId)}`
        + `&exam=${encodeURIComponent(exam)}`;

      fetch(totalsUrl)
        .then(r => r.json())
        .then(totals => {
          if (totals && totals.success) {
            document.getElementById('totalHours').textContent = totals.totalHours || 0;
            document.getElementById('totalTopics').textContent = totals.totalTopics || 0;
            document.getElementById('totalTests').textContent = totals.totalMocks || 0;
          }
        })
        .catch(err => console.error('Load totals error:', err));
    }

    // Performance Analytics (same endpoint used like UPSC)
    function loadAnalytics() {
      const userId = localStorage.getItem('userId');
      const exam = localStorage.getItem('exam');
      if (!userId || !exam) return;

      const url = `${SCRIPT_URL}?action=getStudyAnalytics`
        + `&userId=${encodeURIComponent(userId)}`
        + `&exam=${encodeURIComponent(exam)}`;

      fetch(url)
        .then(r => r.json())
        .then(data => {
          if (!data || !data.success) return;
          document.getElementById('avgHours').textContent =
            (data.avgHours || 0).toFixed(1);
          document.getElementById('streakDays').textContent =
            data.streakDays || 0;
        })
        .catch(err => console.error('loadAnalytics error:', err));
    }

    // Announcements
    function renderAnnouncements(items) {
      const container = document.getElementById('announcements');
      container.innerHTML = '';
      if (!items || !items.length) {
        container.innerHTML =
          '<div class="empty-state">No announcements yet. Admin will update here.</div>';
        return;
      }

      const list = document.createElement('div');
      list.className = 'list';
      items.forEach((it, index) => {
        const row = document.createElement('div');
        row.className = 'list-item';
        if (index === 0) {
          row.classList.add('new');
        }
        row.textContent = typeof it === 'string' ? it : (it.text || it.title || '');
        if (index === 0) {
          const tag = document.createElement('span');
          tag.className = 'tag';
          tag.textContent = 'NEW';
          row.appendChild(tag);
        }
        list.appendChild(row);
      });
      container.appendChild(list);
    }

    // Folder View button renderer
    function renderFolderButton(containerId, folderUrl, emptyMessage) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      if (!folderUrl) {
        container.innerHTML = `<div class="empty-state">${emptyMessage || 'No data yet.'}</div>`;
        return;
      }
      const btn = document.createElement('button');
      btn.className = 'btn-folder';
      btn.textContent = 'View Folder';
      btn.onclick = () => window.open(folderUrl, '_blank');
      container.appendChild(btn);
    }

    // Motivational quotes from backend
    function renderQuotesList(containerId, items) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      if (!items || !items.length) {
        container.innerHTML =
          '<div class="empty-state">Admin will share motivational quotes soon.</div>';
        return;
      }
      const list = document.createElement('div');
      list.className = 'list';
      items.forEach(q => {
        const row = document.createElement('div');
        row.className = 'list-item';
        row.textContent = typeof q === 'string' ? q : (q.text || q.title || '');
        list.appendChild(row);
      });
      container.appendChild(list);
    }

    // Dashboard content (announcements + quotes + syllabus from backend)
    function loadRpscDashboardContent() {
      const url = `${SCRIPT_URL}?action=getDashboardContent&examType=RPSC`;

      fetch(url)
        .then(r => r.json())
        .then(data => {
          if (!data || !data.success || !data.payload) return;
          const p = data.payload;

          if (p.announcements && Array.isArray(p.announcements.items)) {
            renderAnnouncements(p.announcements.items);
          }

          if (p.quotes && Array.isArray(p.quotes.items) && p.quotes.items.length) {
            renderQuotesList('motivationalQuotes', p.quotes.items);
          }

          if (p.syllabus) {
            const pre = p.syllabus.prelimsPercent || 0;
            const mains = p.syllabus.mainsPercent || 0;
            document.getElementById('prelimsPercent').textContent = pre + '% Complete';
            document.getElementById('mainsPercent').textContent = mains + '% Complete';
            document.getElementById('prelimsBar').style.width = pre + '%';
            document.getElementById('mainsBar').style.width = mains + '%';
          }
        })
        .catch(err => console.error('loadRpscDashboardContent error:', err));

      // Static folder buttons ‚Äì always visible
      renderFolderButton(
        'testSeriesList',
        RPSC_FOLDER_LINKS.testSeries,
        'Admin will upload mock tests soon.'
      );

      renderFolderButton(
        'pypList',
        RPSC_FOLDER_LINKS.pyqPapers,
        'Admin will upload PYQ PDFs soon.'
      );

      renderFolderButton(
        'booksList',
        RPSC_FOLDER_LINKS.books,
        'Admin will upload books list soon.'
      );

      renderFolderButton(
        'formulaList',
        RPSC_FOLDER_LINKS.chartsMaps,
        'Admin will upload charts & maps soon.'
      );

      renderFolderButton(
        'notesList',
        RPSC_FOLDER_LINKS.notesPdfs,
        'Admin will upload notes & PDFs soon.'
      );

      renderFolderButton(
        'otherStateList',
        RPSC_FOLDER_LINKS.otherState,
        'Admin will upload other state exams material soon.'
      );
    }

    window.onload = function() {
      document.getElementById('userName').textContent =
        localStorage.getItem('name') || 'Candidate';

      updateCountdown();
      loadDailyQuote();
      loadTotals();
      loadAnalytics();
      loadRpscDashboardContent();
    };
  </script>
</head>
<body>
  <!-- HEADER -->
  <div class="header">
    <h1>RPSC Dashboard</h1>
    <div class="header-right">
      <span id="userName">Welcome</span>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </div>
  </div>

  <div class="container">
    <!-- COUNTDOWN -->
    <section class="exam-countdown">
      <h2>RPSC Exams 2026</h2>
      <div class="exam-subtitle">
        Roz ka disciplined study aapko agle RPSC panel ke saamne confident khada karta hai.
      </div>
      <div class="countdown-grid">
        <div class="countdown-item">
          <div class="title">RAS Pre 2026</div>
          <div class="number" id="daysRas">0</div>
          <div class="label">Days Left</div>
        </div>
        <div class="countdown-item">
          <div class="title">1st Grade 2026</div>
          <div class="number" id="daysG1">0</div>
          <div class="label">Days Left</div>
        </div>
        <div class="countdown-item">
          <div class="title">2nd Grade 2026</div>
          <div class="number" id="daysG2">0</div>
          <div class="label">Days Left</div>
        </div>
      </div>
      <div class="quote" id="dailyQuote">
        Aaj ka ek extra revision page, kal interview board ke saamne extra confidence banega.
      </div>
    </section>

    <!-- ROW 1: Update Daily Progress (full width) -->
    <section class="section-card section-accent-green">
      <div class="section-card-inner">
        <div class="section-header">
          <h2><span class="icon">üìà</span>Update Your Daily Progress</h2>
          <span>Track your RPSC preparation honestly</span>
        </div>
        <form id="progressForm" onsubmit="updateProgress(event)">
          <div class="update-grid">
            <div class="update-box">
              <label for="studyHours">Study Hours Today</label>
              <input type="number" id="studyHours" min="0" step="0.5" placeholder="e.g. 6" required>
            </div>
            <div class="update-box">
              <label for="topicsCovered">Topics Covered Today</label>
              <input type="number" id="topicsCovered" min="0" step="1" placeholder="Chapters/Topics" required>
            </div>
            <div class="update-box">
              <label for="mockTests">Questions / Tests</label>
              <input type="number" id="mockTests" min="0" step="1" placeholder="MCQs or tests count" required>
            </div>
            <div class="update-box update-actions">
              <button type="submit" class="btn">üíæ Save & Add to Totals</button>
            </div>
          </div>
        </form>
      </div>
    </section>

    <!-- ROW 2: Overall Totals (left) + Performance Analytics (right) -->
    <div class="section-row two-col">
      <!-- Overall Totals -->
      <section class="section-card">
        <div class="section-card-inner">
          <div class="section-header">
            <h2><span class="icon">üìä</span>Overall Progress Totals</h2>
            <span>Calculated from your daily entries</span>
          </div>
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Total Study Hours</h3>
              <div class="number" id="totalHours">0</div>
              <div class="meta">GS ¬∑ Rajasthan GK ¬∑ Optional combined</div>
            </div>
            <div class="stat-card">
              <h3>Topics Covered</h3>
              <div class="number" id="totalTopics">0</div>
              <div class="meta">Syllabus units completed</div>
            </div>
            <div class="stat-card">
              <h3>Questions / Tests</h3>
              <div class="number" id="totalTests">0</div>
              <div class="meta">MCQs / test papers attempted</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Performance Analytics -->
      <section class="section-card section-accent-purple">
        <div class="section-card-inner">
          <div class="section-header">
            <h2><span class="icon">üìâ</span>Performance Analytics</h2>
            <span>Average effort & consistency streak</span>
          </div>
          <div class="mini-stat-grid">
            <div class="mini-stat">
              <h4>Average Study Hours</h4>
              <div class="value" id="avgHours">0.0</div>
              <div class="hint">Per active study day</div>
            </div>
            <div class="mini-stat">
              <h4>Current Streak</h4>
              <div class="value" id="streakDays">0</div>
              <div class="hint">Consecutive days with study log</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- ROW 3: Announcements (left) + Path Pradarshak (right) -->
    <div class="section-row two-col">
      <!-- Announcements -->
      <section class="section-card section-accent-orange">
        <div class="section-card-inner">
          <div class="section-header">
            <h2><span class="icon">üì£</span>Announcements</h2>
            <span>RPSC related updates from admin</span>
          </div>
          <div id="announcements">
            <div class="empty-state">No announcements yet. Admin will update here.</div>
          </div>
        </div>
      </section>

      <!-- Path Pradarshak (motivation) -->
      <section class="section-card section-accent-purple">
        <div class="section-card-inner">
          <div class="section-header">
            <h2><span class="icon">üåü</span>‡§™‡§• ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§ï</h2>
            <span>Daily motivation for RPSC aspirants</span>
          </div>
          <div id="motivationalQuotes">
            <div class="empty-state">Admin will share motivational quotes soon.</div>
          </div>
        </div>
      </section>
    </div>

    <!-- ROW 4: Test Portal heading center + 2 sections under it -->
    <section class="section-card section-accent-green">
      <div class="section-card-inner">
        <div class="section-header center-title">
          <h2><span class="icon">üìù</span>Test Portal</h2>
        </div>
        <div class="section-row two-col" style="margin-bottom:0;">
          <!-- Mock Tests -->
          <section class="section-card">
            <div class="section-card-inner">
              <h3 class="material-section-title">Mock Tests (RPSC Focused)</h3>
              <div id="testSeriesList">
                <div class="empty-state">Admin will upload mock tests soon.</div>
              </div>
            </div>
          </section>

          <!-- PYQs -->
          <section class="section-card">
            <div class="section-card-inner">
              <h3 class="material-section-title">Previous Year Questions (PYQs)</h3>
              <div id="pypList">
                <div class="empty-state">Admin will upload PYQ PDFs soon.</div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- ROW 5: Study Materials heading center + 3 sections under it -->
    <section class="section-card section-accent-purple">
      <div class="section-card-inner">
        <div class="section-header center-title">
          <h2><span class="icon">üìö</span>Study Materials</h2>
        </div>
        <div class="section-row" style="grid-template-columns: repeat(3, minmax(0,1fr)); gap:16px;">
          <!-- Books -->
          <section class="section-card">
            <div class="section-card-inner">
              <h3 class="material-section-title">Books</h3>
              <div id="booksList">
                <div class="empty-state">Admin will upload books list soon.</div>
              </div>
            </div>
          </section>

          <!-- Charts / Maps -->
          <section class="section-card">
            <div class="section-card-inner">
              <h3 class="material-section-title">Important Charts / Maps</h3>
              <div id="formulaList">
                <div class="empty-state">Admin will upload charts & maps soon.</div>
              </div>
            </div>
          </section>

          <!-- Notes & PDFs -->
          <section class="section-card">
            <div class="section-card-inner">
              <h3 class="material-section-title">Notes & PDFs</h3>
              <div id="notesList">
                <div class="empty-state">Admin will upload notes & PDFs soon.</div>
              </div>
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- ROW 6: Other State Exams (full width) -->
    <section class="section-card section-accent-orange">
      <div class="section-card-inner">
        <div class="section-header">
          <h2><span class="icon">üåç</span>Other State Exams (For Practice)</h2>
          <span>Use these for extra MCQ and paper practice</span>
        </div>
        <div id="otherStateList">
          <div class="empty-state">Admin will upload other state exams material soon.</div>
        </div>
      </div>
    </section>

    <!-- LAST: Community & Help (full width) -->
    <section class="section-card">
      <div class="section-card-inner">
        <div class="section-header">
          <h2><span class="icon">ü§ù</span>Community & Help</h2>
          <span>Telegram group ¬∑ Support</span>
        </div>
        <div class="community-help-grid">
          <div class="community-box">
            <h3>Join GyaanSetu RPSC Community</h3>
            <p>
              Doubt poochne, answer writing review, aur daily motivation ke liye
              official Telegram group join karein.
            </p>
            <a
              href="https://t.me/your_rpsc_group_link"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-telegram"
            >
              Join Telegram Group
            </a>
          </div>
          <div class="help-box">
            <h3>Need Help?</h3>
            <p>Login, dashboard ya content se related koi bhi issue ho to mail karein.</p>
            <p>Response time usually 24 hours ke andar.</p>
            <div class="email">
              <a href="mailto:gyaansetu2026@gmail.com">gyaansetu2026@gmail.com</a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</body>
</html>
