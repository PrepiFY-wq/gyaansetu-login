<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fees & Content Management Admin Panel</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <style>
    body {
      background-color: #f5f7fb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .navbar {
      background: linear-gradient(90deg, #1f3c88, #4e73df);
    }
    .navbar-brand {
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    .card {
      border: none;
      box-shadow: 0 4px 15px rgba(15, 34, 58, 0.12);
      border-radius: 12px;
    }
    .card-header {
      border-bottom: none;
      border-radius: 12px 12px 0 0 !important;
      background: linear-gradient(90deg, #4e73df, #1cc88a);
      color: #fff;
    }
    .status-pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    .status-pending {
      background-color: #fff3cd;
      color: #856404;
    }
    .status-paid {
      background-color: #d4edda;
      color: #155724;
    }
    .status-verified {
      background-color: #cce5ff;
      color: #004085;
    }
    .status-rejected {
      background-color: #f8d7da;
      color: #721c24;
    }
    .tab-btn {
      border-radius: 999px !important;
      font-size: 0.9rem;
      padding: 6px 18px;
    }
    .tab-btn.active {
      background-color: #4e73df;
      color: #fff;
    }
    .table thead {
      background-color: #f1f4ff;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.03em;
    }
    .table tbody tr:hover {
      background-color: #f9fbff;
    }
    .action-btn-sm {
      padding: 2px 10px;
      font-size: 0.75rem;
      border-radius: 999px;
    }
    .badge-pill {
      border-radius: 999px;
    }
    .list-group-item {
      border: none;
      border-radius: 10px !important;
      margin-bottom: 5px;
      background-color: #f7f9ff;
    }
    .list-group-item small {
      color: #6c757d;
    }
    .nav-pills .nav-link {
      border-radius: 999px;
      font-size: 0.9rem;
    }
    .sub-label {
      font-size: 0.8rem;
      color: #6c757d;
    }
    .section-box {
      border: 1px solid #e5e7f0;
      border-radius: 10px;
      padding: 12px 12px 10px 12px;
      margin-bottom: 12px;
      background-color: #f9fbff;
    }
    .section-box-title {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <!-- Top Navbar -->
  <nav class="navbar navbar-dark mb-4">
    <div class="container-fluid">
      <span class="navbar-brand mb-0 h1">GyaanSetu Admin</span>
      <span class="text-light small">Fees & Dashboard Management</span>
    </div>
  </nav>

  <div class="container mb-4">
    <div class="row g-3">
      <!-- Registrations Summary -->
      <div class="col-md-3">
        <div class="card text-center">
          <div class="card-body">
            <h6 class="text-muted mb-1">Total Registrations</h6>
            <h3 id="totalRegistrations" class="mb-0">0</h3>
          </div>
        </div>
      </div>
      <!-- Pending Payments -->
      <div class="col-md-3">
        <div class="card text-center">
          <div class="card-body">
            <h6 class="text-muted mb-1">Pending Approvals</h6>
            <h3 id="pendingPayments" class="mb-0 text-warning">0</h3>
          </div>
        </div>
      </div>
      <!-- Verified Payments -->
      <div class="col-md-3">
        <div class="card text-center">
          <div class="card-body">
            <h6 class="text-muted mb-1">Approved</h6>
            <h3 id="verifiedPayments" class="mb-0 text-success">0</h3>
          </div>
        </div>
      </div>
      <!-- Last Sync -->
      <div class="col-md-3">
        <div class="card text-center">
          <div class="card-body">
            <h6 class="text-muted mb-1">Last Sync</h6>
            <h6 id="lastSyncTime" class="mb-0 small text-secondary">–</h6>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Registration Management -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Registrations</span>
        <div>
          <button class="btn btn-light btn-sm tab-btn me-1 active" id="tab-all">All</button>
          <button class="btn btn-light btn-sm tab-btn me-1" id="tab-pending">Pending</button>
          <button class="btn btn-light btn-sm tab-btn me-1" id="tab-approved">Approved</button>
          <button class="btn btn-light btn-sm tab-btn" id="tab-rejected">Rejected</button>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table align-middle mb-0" id="registrationsTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Student</th>
                <th>Details</th>
                <th>Payment</th>
                <th>Txn / Ref</th>
                <th>Status</th>
                <th>Admin Actions</th>
              </tr>
            </thead>
            <tbody id="registrationsBody">
              <!-- Dynamic rows -->
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Content Management Tabs -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <span>Dashboard Content Management</span>
        <ul class="nav nav-pills" id="contentTabNav">
          <li class="nav-item">
            <button class="nav-link active" data-target="#upscSection">UPSC CSE</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-target="#jeeSection">JEE</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-target="#neetSection">NEET</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-target="#rpscSection">RPSC</button>
          </li>
        </ul>
      </div>
      <div class="card-body">

        <!-- ================= UPSC SECTION ================= -->
        <div id="upscSection" class="content-section">
          <h6 class="mb-3">UPSC CSE Dashboard</h6>

          <!-- Announcements -->
          <div class="section-box">
            <div class="section-box-title">Announcements</div>
            <input type="text" id="upsc_announcements_title" class="form-control mb-2"
              placeholder="Title (e.g. Important Updates)" />
            <textarea id="upsc_announcements_items" class="form-control" rows="3"
              placeholder="Har line ek item (text / link / file info)"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','announcements')">
                Save Announcements
              </button>
              <span id="upsc_announcements_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Daily Targets -->
          <div class="section-box">
            <div class="section-box-title">Daily Targets</div>
            <input type="text" id="upsc_dailyTargets_title" class="form-control mb-2"
              placeholder="Title (e.g. Today's Targets)" />
            <textarea id="upsc_dailyTargets_items" class="form-control" rows="3"
              placeholder="Har line ek target / resource"></textarea>
            <div class="sub-label mt-1">
              UPSC dashboard me Daily Targets list me show hoga.
            </div>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','dailyTargets')">
                Save Daily Targets
              </button>
              <span id="upsc_dailyTargets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Recent Topics -->
          <div class="section-box">
            <div class="section-box-title">Recent Topics</div>
            <input type="text" id="upsc_recentTopics_title" class="form-control mb-2"
              placeholder="Title (e.g. Recently Covered)" />
            <textarea id="upsc_recentTopics_items" class="form-control" rows="3"
              placeholder="Har line ek topic / description"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','recentTopics')">
                Save Recent Topics
              </button>
              <span id="upsc_recentTopics_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Mock Tests -->
          <div class="section-box">
            <div class="section-box-title">Mock Tests</div>
            <input type="text" id="upsc_mockTests_title" class="form-control mb-2"
              placeholder="Title (e.g. Full Mocks)" />
            <textarea id="upsc_mockTests_items" class="form-control" rows="3"
              placeholder="Har line me koi bhi text / link / file info likho"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','mockTests')">
                Save Mock Tests
              </button>
              <span id="upsc_mockTests_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Test Series -->
          <div class="section-box">
            <div class="section-box-title">Test Series</div>
            <input type="text" id="upsc_testSeries_title" class="form-control mb-2"
              placeholder="Title (e.g. GS Test Series)" />
            <textarea id="upsc_testSeries_items" class="form-control" rows="3"
              placeholder="Har line me text / link / file info"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','testSeries')">
                Save Test Series
              </button>
              <span id="upsc_testSeries_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- PYQs -->
          <div class="section-box">
            <div class="section-box-title">Previous Year Papers</div>
            <input type="text" id="upsc_pyqPapers_title" class="form-control mb-2"
              placeholder="Title (e.g. PYQs)" />
            <textarea id="upsc_pyqPapers_items" class="form-control" rows="3"
              placeholder="Har line ek PYQ info (text/link)"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','pyqPapers')">
                Save PYQs
              </button>
              <span id="upsc_pyqPapers_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Books -->
          <div class="section-box">
            <div class="section-box-title">Books</div>
            <input type="text" id="upsc_books_title" class="form-control mb-2"
              placeholder="Title (e.g. Standard Books)" />
            <textarea id="upsc_books_items" class="form-control" rows="3"
              placeholder="Har line ek book / note / file naam"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','books')">
                Save Books
              </button>
              <span id="upsc_books_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Current Affairs -->
          <div class="section-box">
            <div class="section-box-title">Current Affairs</div>
            <input type="text" id="upsc_currentAffairs_title" class="form-control mb-2"
              placeholder="Title (e.g. CA Sources)" />
            <textarea id="upsc_currentAffairs_items" class="form-control" rows="3"
              placeholder="Har line ek CA source / link"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','currentAffairs')">
                Save Current Affairs
              </button>
              <span id="upsc_currentAffairs_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Notes & PDFs -->
          <div class="section-box">
            <div class="section-box-title">Notes & PDFs</div>
            <input type="text" id="upsc_notesPdfs_title" class="form-control mb-2"
              placeholder="Title (e.g. GS Notes / PDFs)" />
            <textarea id="upsc_notesPdfs_items" class="form-control" rows="3"
              placeholder="Har line ek note / pdf info"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','notesPdfs')">
                Save Notes & PDFs
              </button>
              <span id="upsc_notesPdfs_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Syllabus -->
          <div class="section-box">
            <div class="section-box-title">Syllabus Coverage</div>
            <div class="row g-2">
              <div class="col-md-6">
                <label class="form-label">Prelims %</label>
                <input type="number" id="upsc_syllabus_prelimsPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-6">
                <label class="form-label">Mains %</label>
                <input type="number" id="upsc_syllabus_mainsPercent" class="form-control" min="0" max="100" />
              </div>
            </div>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','syllabus')">
                Save Syllabus
              </button>
              <span id="upsc_syllabus_msg" class="ms-2 small"></span>
            </div>
          </div>

          <!-- Path Pradarshak Quotes -->
          <div class="section-box">
            <div class="section-box-title">Path Pradarshak Quotes</div>
            <input type="text" id="upsc_quotes_title" class="form-control mb-2"
              placeholder="Title (e.g. Path Pradarshak)" />
            <textarea id="upsc_quotes_items" class="form-control" rows="3"
              placeholder="Har line ek short motivational line / story"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('UPSC','quotes')">
                Save Quotes
              </button>
              <span id="upsc_quotes_msg" class="ms-2 small"></span>
            </div>
          </div>
        </div>

        <!-- ================= JEE SECTION ================= -->
        <div id="jeeSection" class="content-section d-none">
          <h6 class="mb-3">JEE Dashboard</h6>

          <div class="section-box">
            <div class="section-box-title">Announcements</div>
            <input type="text" id="jee_announcements_title" class="form-control mb-2" />
            <textarea id="jee_announcements_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','announcements')">
                Save Announcements
              </button>
              <span id="jee_announcements_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Daily Targets</div>
            <input type="text" id="jee_dailyTargets_title" class="form-control mb-2" />
            <textarea id="jee_dailyTargets_items" class="form-control" rows="3"
              placeholder="Physics: Kinematics 1D&#10;Chemistry: Mole concept"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','dailyTargets')">
                Save Daily Targets
              </button>
              <span id="jee_dailyTargets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Recent Topics</div>
            <input type="text" id="jee_recentTopics_title" class="form-control mb-2" />
            <textarea id="jee_recentTopics_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','recentTopics')">
                Save Recent Topics
              </button>
              <span id="jee_recentTopics_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Test Series</div>
            <input type="text" id="jee_testSeries_title" class="form-control mb-2" />
            <textarea id="jee_testSeries_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','testSeries')">
                Save Test Series
              </button>
              <span id="jee_testSeries_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">PYQs</div>
            <input type="text" id="jee_pyqPapers_title" class="form-control mb-2" />
            <textarea id="jee_pyqPapers_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','pyqPapers')">
                Save PYQs
              </button>
              <span id="jee_pyqPapers_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Books</div>
            <input type="text" id="jee_books_title" class="form-control mb-2" />
            <textarea id="jee_books_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','books')">
                Save Books
              </button>
              <span id="jee_books_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Formula Sheets</div>
            <input type="text" id="jee_formulaSheets_title" class="form-control mb-2" />
            <textarea id="jee_formulaSheets_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','formulaSheets')">
                Save Formula Sheets
              </button>
              <span id="jee_formulaSheets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Notes & PDFs</div>
            <input type="text" id="jee_notesPdfs_title" class="form-control mb-2" />
            <textarea id="jee_notesPdfs_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','notesPdfs')">
                Save Notes & PDFs
              </button>
              <span id="jee_notesPdfs_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Syllabus Coverage</div>
            <div class="row g-2">
              <div class="col-md-4">
                <label class="form-label">Physics %</label>
                <input type="number" id="jee_syllabus_phyPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Chemistry %</label>
                <input type="number" id="jee_syllabus_chemPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Maths %</label>
                <input type="number" id="jee_syllabus_mathPercent" class="form-control" min="0" max="100" />
              </div>
            </div>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('JEE','syllabus')">
                Save Syllabus
              </button>
              <span id="jee_syllabus_msg" class="ms-2 small"></span>
            </div>
          </div>
        </div>

        <!-- ================= NEET SECTION ================= -->
        <div id="neetSection" class="content-section d-none">
          <h6 class="mb-3">NEET Dashboard</h6>

          <div class="section-box">
            <div class="section-box-title">Announcements</div>
            <input type="text" id="neet_announcements_title" class="form-control mb-2" />
            <textarea id="neet_announcements_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','announcements')">
                Save Announcements
              </button>
              <span id="neet_announcements_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Daily Targets</div>
            <input type="text" id="neet_dailyTargets_title" class="form-control mb-2" />
            <textarea id="neet_dailyTargets_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','dailyTargets')">
                Save Daily Targets
              </button>
              <span id="neet_dailyTargets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Recent Topics</div>
            <input type="text" id="neet_recentTopics_title" class="form-control mb-2" />
            <textarea id="neet_recentTopics_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','recentTopics')">
                Save Recent Topics
              </button>
              <span id="neet_recentTopics_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Mock Tests</div>
            <input type="text" id="neet_mockTests_title" class="form-control mb-2" />
            <textarea id="neet_mockTests_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','mockTests')">
                Save Mock Tests
              </button>
              <span id="neet_mockTests_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">PYQs</div>
            <input type="text" id="neet_pyqPapers_title" class="form-control mb-2" />
            <textarea id="neet_pyqPapers_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','pyqPapers')">
                Save PYQs
              </button>
              <span id="neet_pyqPapers_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Books</div>
            <input type="text" id="neet_books_title" class="form-control mb-2" />
            <textarea id="neet_books_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','books')">
                Save Books
              </button>
              <span id="neet_books_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Important Diagrams / Charts</div>
            <input type="text" id="neet_formulaSheets_title" class="form-control mb-2" />
            <textarea id="neet_formulaSheets_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','formulaSheets')">
                Save Diagrams / Charts
              </button>
              <span id="neet_formulaSheets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Notes & PDFs</div>
            <input type="text" id="neet_notesPdfs_title" class="form-control mb-2" />
            <textarea id="neet_notesPdfs_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','notesPdfs')">
                Save Notes & PDFs
              </button>
              <span id="neet_notesPdfs_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Syllabus Coverage</div>
            <div class="row g-2">
              <div class="col-md-4">
                <label class="form-label">Physics %</label>
                <input type="number" id="neet_syllabus_phyPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Chemistry %</label>
                <input type="number" id="neet_syllabus_chemPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Biology %</label>
                <input type="number" id="neet_syllabus_bioPercent" class="form-control" min="0" max="100" />
              </div>
            </div>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('NEET','syllabus')">
                Save Syllabus
              </button>
              <span id="neet_syllabus_msg" class="ms-2 small"></span>
            </div>
          </div>
        </div>

        <!-- ================= RPSC SECTION ================= -->
        <div id="rpscSection" class="content-section d-none">
          <h6 class="mb-3">RPSC Dashboard</h6>

          <div class="section-box">
            <div class="section-box-title">Announcements</div>
            <input type="text" id="rpsc_announcements_title" class="form-control mb-2" />
            <textarea id="rpsc_announcements_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','announcements')">
                Save Announcements
              </button>
              <span id="rpsc_announcements_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Daily Targets</div>
            <input type="text" id="rpsc_dailyTargets_title" class="form-control mb-2" />
            <textarea id="rpsc_dailyTargets_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','dailyTargets')">
                Save Daily Targets
              </button>
              <span id="rpsc_dailyTargets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Recent Topics</div>
            <input type="text" id="rpsc_recentTopics_title" class="form-control mb-2" />
            <textarea id="rpsc_recentTopics_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','recentTopics')">
                Save Recent Topics
              </button>
              <span id="rpsc_recentTopics_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Mock Tests</div>
            <input type="text" id="rpsc_mockTests_title" class="form-control mb-2" />
            <textarea id="rpsc_mockTests_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','mockTests')">
                Save Mock Tests
              </button>
              <span id="rpsc_mockTests_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">PYQs</div>
            <input type="text" id="rpsc_pyqPapers_title" class="form-control mb-2" />
            <textarea id="rpsc_pyqPapers_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','pyqPapers')">
                Save PYQs
              </button>
              <span id="rpsc_pyqPapers_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Books</div>
            <input type="text" id="rpsc_books_title" class="form-control mb-2" />
            <textarea id="rpsc_books_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','books')">
                Save Books
              </button>
              <span id="rpsc_books_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Charts / Maps</div>
            <input type="text" id="rpsc_formulaSheets_title" class="form-control mb-2" />
            <textarea id="rpsc_formulaSheets_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','formulaSheets')">
                Save Charts / Maps
              </button>
              <span id="rpsc_formulaSheets_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Notes & PDFs</div>
            <input type="text" id="rpsc_notesPdfs_title" class="form-control mb-2" />
            <textarea id="rpsc_notesPdfs_items" class="form-control" rows="3"></textarea>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','notesPdfs')">
                Save Notes & PDFs
              </button>
              <span id="rpsc_notesPdfs_msg" class="ms-2 small"></span>
            </div>
          </div>

          <div class="section-box">
            <div class="section-box-title">Syllabus Coverage</div>
            <div class="row g-2">
              <div class="col-md-4">
                <label class="form-label">GS %</label>
                <input type="number" id="rpsc_syllabus_gsPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Rajasthan GK %</label>
                <input type="number" id="rpsc_syllabus_rajPercent" class="form-control" min="0" max="100" />
              </div>
              <div class="col-md-4">
                <label class="form-label">Optional / Subject %</label>
                <input type="number" id="rpsc_syllabus_optPercent" class="form-control" min="0" max="100" />
              </div>
            </div>
            <div class="mt-2 d-flex align-items-center">
              <button class="btn btn-primary btn-sm" onclick="saveSection('RPSC','syllabus')">
                Save Syllabus
              </button>
              <span id="rpsc_syllabus_msg" class="ms-2 small"></span>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Recent Activity -->
    <div class="row g-4 my-4">
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">Recent Registrations</div>
          <div class="card-body">
            <ul class="list-group list-group-flush" id="recentRegistrations">
              <!-- Dynamic -->
            </ul>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <div class="card-header">Recent Payment Updates</div>
          <div class="card-body">
            <ul class="list-group list-group-flush" id="recentPayments">
              <!-- Dynamic -->
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Admin Logic -->
  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyFiEVyWCStmdOxaSz2AAboplrOXAJn0XuW614KRzLihSL60qL8zy3GEgBVvm0DQPcmQg/exec';

    let registrationsData = [];

    function showMessageElement(el, message, isError = false) {
      if (!el) return;
      el.textContent = message;
      el.className = isError ? "ms-2 small text-danger" : "ms-2 small text-success";
      setTimeout(() => {
        el.textContent = "";
      }, 3000);
    }

    function setLastSync() {
      const now = new Date();
      const formatted =
        now.toLocaleDateString("en-IN") + " " + now.toLocaleTimeString("en-IN");
      const el = document.getElementById("lastSyncTime");
      if (el) el.textContent = formatted;
    }

    // ---------- REGISTRATIONS ----------

    async function loadRegistrations() {
      try {
        const res = await fetch(SCRIPT_URL + "?action=getAll");
        const data = await res.json();
        if (!data.success || !Array.isArray(data.users)) {
          console.error("Invalid registrations payload", data);
          return;
        }

        registrationsData = data.users;
        renderRegistrations("all");
        updateStats();
        updateRecentSections();
        setLastSync();
      } catch (err) {
        console.error("Error loading registrations:", err);
      }
    }

    function renderRegistrations(filter) {
      const tbody = document.getElementById("registrationsBody");
      tbody.innerHTML = "";

      const filtered = registrationsData.filter((row) => {
        const statusPay = (row.paymentStatus || "").toLowerCase();
        const statusVer = (row.verificationStatus || "").toLowerCase();

        const overallStatus =
          statusPay === "verified" && statusVer === "verified"
            ? "approved"
            : statusPay === "rejected" || statusVer === "rejected"
            ? "rejected"
            : "pending";

        if (filter === "pending") return overallStatus === "pending";
        if (filter === "approved") return overallStatus === "approved";
        if (filter === "rejected") return overallStatus === "rejected";
        return true;
      });

      filtered.forEach((row, index) => {
        const tr = document.createElement("tr");

        const statusPay = (row.paymentStatus || "").toLowerCase();
        const statusVer = (row.verificationStatus || "").toLowerCase();

        let statusClass = "status-pending";
        let statusLabel = "Pending";

        if (statusPay === "verified" && statusVer === "verified") {
          statusClass = "status-verified";
          statusLabel = "Approved";
        } else if (statusPay === "rejected" || statusVer === "rejected") {
          statusClass = "status-rejected";
          statusLabel = "Rejected";
        }

        const bothVerified = statusPay === "verified" && statusVer === "verified";

        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>
            <div class="fw-semibold">${row.name || "-"}</div>
            <div class="small text-muted">${row.email || "-"}</div>
            <div class="small text-muted">${row.contact || "-"}</div>
          </td>
          <td>
            <div class="small">Exam: <span class="fw-semibold">${row.exam || "-"}</span></div>
            <div class="small text-muted">User ID: ${row.userId || "-"}</div>
          </td>
          <td>
            <div class="small">Payment: <span class="fw-semibold">${row.paymentStatus || "-"}</span></div>
            <div class="small text-muted">Verification: ${row.verificationStatus || "-"}</div>
          </td>
          <td>
            <div class="small">—</div>
          </td>
          <td>
            <span class="status-pill ${statusClass}">${statusLabel}</span>
          </td>
          <td>
            <div class="d-flex flex-column gap-1">
              <button class="btn btn-success btn-sm action-btn-sm"
                onclick="markPaymentVerified('${row.contact}')">
                Payment ✓
              </button>
              <button class="btn btn-primary btn-sm action-btn-sm"
                onclick="markRegistrationVerified('${row.contact}')">
                Registration ✓
              </button>
              <button class="btn btn-outline-secondary btn-sm action-btn-sm"
                onclick="sendLoginMail('${row.email}')"
                ${bothVerified ? "" : "disabled"}>
                Send Login Mail
              </button>
              <button class="btn btn-outline-danger btn-sm action-btn-sm"
                onclick="markRejected('${row.contact}')">
                Reject
              </button>
            </div>
          </td>
        `;
        tbody.appendChild(tr);
      });
    }

    function updateStats() {
      const total = registrationsData.length;
      const pending = registrationsData.filter((r) => {
        const ps = (r.paymentStatus || "").toLowerCase();
        const vs = (r.verificationStatus || "").toLowerCase();
        return !(ps === "verified" && vs === "verified") &&
               ps !== "rejected" && vs !== "rejected";
      }).length;

      const approved = registrationsData.filter((r) => {
        const ps = (r.paymentStatus || "").toLowerCase();
        const vs = (r.verificationStatus || "").toLowerCase();
        return ps === "verified" && vs === "verified";
      }).length;

      document.getElementById("totalRegistrations").textContent = total;
      document.getElementById("pendingPayments").textContent = pending;
      document.getElementById("verifiedPayments").textContent = approved;
    }

    function updateRecentSections() {
      const recentRegs = document.getElementById("recentRegistrations");
      const recentPays = document.getElementById("recentPayments");
      recentRegs.innerHTML = "";
      recentPays.innerHTML = "";

      const lastFive = [...registrationsData].slice(-5).reverse();
      lastFive.forEach((u) => {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";
        li.innerHTML = `
          <div>
            <div class="fw-semibold">${u.name || "-"}</div>
            <small>${u.exam || "-"} • ${u.contact || "-"}</small>
          </div>
          <span class="badge bg-light text-muted">${u.paymentStatus || "Pending"}</span>
        `;
        recentRegs.appendChild(li);
      });

      const lastFiveStatus = [...registrationsData].slice(-5).reverse();
      lastFiveStatus.forEach((u) => {
        const li = document.createElement("li");
        li.className = "list-group-item d-flex justify-content-between align-items-center";
        li.innerHTML = `
          <div>
            <div class="fw-semibold">${u.name || "-"}</div>
            <small>${u.exam || "-"} • ${u.contact || "-"}</small>
          </div>
          <span class="badge bg-light text-muted">${u.verificationStatus || "-"}</span>
        `;
        recentPays.appendChild(li);
      });
    }

    async function markPaymentVerified(contact) {
      if (!contact) return;
      try {
        const res = await fetch(
          SCRIPT_URL +
            "?action=updateUserPayment&contact=" +
            encodeURIComponent(contact)
        );
        const data = await res.json();
        if (data && data.success) {
          await loadRegistrations();
        } else {
          alert(data.message || "Failed to verify payment");
        }
      } catch (err) {
        console.error("Error verifying payment:", err);
      }
    }

    async function markRegistrationVerified(contact) {
      if (!contact) return;
      try {
        const res = await fetch(
          SCRIPT_URL +
            "?action=updateUserRegistration&contact=" +
            encodeURIComponent(contact)
        );
        const data = await res.json();
        if (data && data.success) {
          await loadRegistrations();
        } else {
          alert(data.message || "Failed to verify registration");
        }
      } catch (err) {
        console.error("Error verifying registration:", err);
      }
    }

    async function markRejected(contact) {
      if (!contact) return;
      try {
        const res = await fetch(
          SCRIPT_URL +
            "?action=updateUser&row=&paymentStatus=Rejected&verificationStatus=Rejected&contact=" +
            encodeURIComponent(contact)
        );
        const data = await res.json();
        if (data && data.success) {
          await loadRegistrations();
        } else {
          alert(data.message || "Failed to reject");
        }
      } catch (err) {
        console.error("Error rejecting candidate:", err);
      }
    }

    async function sendLoginMail(email) {
      if (!email) {
        alert("Email not found for this student.");
        return;
      }
      if (!confirm("Send login email to " + email + "?")) return;

      try {
        const res = await fetch(
          SCRIPT_URL +
            "?action=sendLoginMail&email=" +
            encodeURIComponent(email)
        );
        const data = await res.json();
        if (data && data.success) {
          alert("Login mail sent.");
        } else {
          alert(data.message || "Failed to send mail.");
        }
      } catch (err) {
        console.error("sendLoginMail error:", err);
        alert("Error sending mail.");
      }
    }

    // ---------- DASHBOARD CONTENT CONFIG ----------

    const SECTION_CONFIG = {
      UPSC: {
        announcements: {
          titleId: "upsc_announcements_title",
          itemsId: "upsc_announcements_items",
          msgId: "upsc_announcements_msg"
        },
        dailyTargets: {
          titleId: "upsc_dailyTargets_title",
          itemsId: "upsc_dailyTargets_items",
          msgId: "upsc_dailyTargets_msg"
        },
        recentTopics: {
          titleId: "upsc_recentTopics_title",
          itemsId: "upsc_recentTopics_items",
          msgId: "upsc_recentTopics_msg"
        },
        mockTests: {
          titleId: "upsc_mockTests_title",
          itemsId: "upsc_mockTests_items",
          msgId: "upsc_mockTests_msg"
        },
        testSeries: {
          titleId: "upsc_testSeries_title",
          itemsId: "upsc_testSeries_items",
          msgId: "upsc_testSeries_msg"
        },
        pyqPapers: {
          titleId: "upsc_pyqPapers_title",
          itemsId: "upsc_pyqPapers_items",
          msgId: "upsc_pyqPapers_msg"
        },
        books: {
          titleId: "upsc_books_title",
          itemsId: "upsc_books_items",
          msgId: "upsc_books_msg"
        },
        currentAffairs: {
          titleId: "upsc_currentAffairs_title",
          itemsId: "upsc_currentAffairs_items",
          msgId: "upsc_currentAffairs_msg"
        },
        notesPdfs: {
          titleId: "upsc_notesPdfs_title",
          itemsId: "upsc_notesPdfs_items",
          msgId: "upsc_notesPdfs_msg"
        },
        syllabus: {
          msgId: "upsc_syllabus_msg",
          extra: ["upsc_syllabus_prelimsPercent", "upsc_syllabus_mainsPercent"]
        },
        quotes: {
          titleId: "upsc_quotes_title",
          itemsId: "upsc_quotes_items",
          msgId: "upsc_quotes_msg"
        }
      },
      JEE: {
        announcements: {
          titleId: "jee_announcements_title",
          itemsId: "jee_announcements_items",
          msgId: "jee_announcements_msg"
        },
        dailyTargets: {
          titleId: "jee_dailyTargets_title",
          itemsId: "jee_dailyTargets_items",
          msgId: "jee_dailyTargets_msg"
        },
        recentTopics: {
          titleId: "jee_recentTopics_title",
          itemsId: "jee_recentTopics_items",
          msgId: "jee_recentTopics_msg"
        },
        testSeries: {
          titleId: "jee_testSeries_title",
          itemsId: "jee_testSeries_items",
          msgId: "jee_testSeries_msg"
        },
        pyqPapers: {
          titleId: "jee_pyqPapers_title",
          itemsId: "jee_pyqPapers_items",
          msgId: "jee_pyqPapers_msg"
        },
        books: {
          titleId: "jee_books_title",
          itemsId: "jee_books_items",
          msgId: "jee_books_msg"
        },
        formulaSheets: {
          titleId: "jee_formulaSheets_title",
          itemsId: "jee_formulaSheets_items",
          msgId: "jee_formulaSheets_msg"
        },
        notesPdfs: {
          titleId: "jee_notesPdfs_title",
          itemsId: "jee_notesPdfs_items",
          msgId: "jee_notesPdfs_msg"
        },
        syllabus: {
          msgId: "jee_syllabus_msg",
          extra: [
            "jee_syllabus_phyPercent",
            "jee_syllabus_chemPercent",
            "jee_syllabus_mathPercent"
          ]
        }
      },
      NEET: {
        announcements: {
          titleId: "neet_announcements_title",
          itemsId: "neet_announcements_items",
          msgId: "neet_announcements_msg"
        },
        dailyTargets: {
          titleId: "neet_dailyTargets_title",
          itemsId: "neet_dailyTargets_items",
          msgId: "neet_dailyTargets_msg"
        },
        recentTopics: {
          titleId: "neet_recentTopics_title",
          itemsId: "neet_recentTopics_items",
          msgId: "neet_recentTopics_msg"
        },
        mockTests: {
          titleId: "neet_mockTests_title",
          itemsId: "neet_mockTests_items",
          msgId: "neet_mockTests_msg"
        },
        pyqPapers: {
          titleId: "neet_pyqPapers_title",
          itemsId: "neet_pyqPapers_items",
          msgId: "neet_pyqPapers_msg"
        },
        books: {
          titleId: "neet_books_title",
          itemsId: "neet_books_items",
          msgId: "neet_books_msg"
        },
        formulaSheets: {
          titleId: "neet_formulaSheets_title",
          itemsId: "neet_formulaSheets_items",
          msgId: "neet_formulaSheets_msg"
        },
        notesPdfs: {
          titleId: "neet_notesPdfs_title",
          itemsId: "neet_notesPdfs_items",
          msgId: "neet_notesPdfs_msg"
        },
        syllabus: {
          msgId: "neet_syllabus_msg",
          extra: [
            "neet_syllabus_phyPercent",
            "neet_syllabus_chemPercent",
            "neet_syllabus_bioPercent"
          ]
        }
      },
      RPSC: {
        announcements: {
          titleId: "rpsc_announcements_title",
          itemsId: "rpsc_announcements_items",
          msgId: "rpsc_announcements_msg"
        },
        dailyTargets: {
          titleId: "rpsc_dailyTargets_title",
          itemsId: "rpsc_dailyTargets_items",
          msgId: "rpsc_dailyTargets_msg"
        },
        recentTopics: {
          titleId: "rpsc_recentTopics_title",
          itemsId: "rpsc_recentTopics_items",
          msgId: "rpsc_recentTopics_msg"
        },
        mockTests: {
          titleId: "rpsc_mockTests_title",
          itemsId: "rpsc_mockTests_items",
          msgId: "rpsc_mockTests_msg"
        },
        pyqPapers: {
          titleId: "rpsc_pyqPapers_title",
          itemsId: "rpsc_pyqPapers_items",
          msgId: "rpsc_pyqPapers_msg"
        },
        books: {
          titleId: "rpsc_books_title",
          itemsId: "rpsc_books_items",
          msgId: "rpsc_books_msg"
        },
        formulaSheets: {
          titleId: "rpsc_formulaSheets_title",
          itemsId: "rpsc_formulaSheets_items",
          msgId: "rpsc_formulaSheets_msg"
        },
        notesPdfs: {
          titleId: "rpsc_notesPdfs_title",
          itemsId: "rpsc_notesPdfs_items",
          msgId: "rpsc_notesPdfs_msg"
        },
        syllabus: {
          msgId: "rpsc_syllabus_msg",
          extra: [
            "rpsc_syllabus_gsPercent",
            "rpsc_syllabus_rajPercent",
            "rpsc_syllabus_optPercent"
          ]
        }
      }
    };

    function linesToArray(str) {
      return (str || "")
        .split("\n")
        .map((s) => s.trim())
        .filter((s) => s.length > 0);
    }

    async function saveSection(examType, sectionKey) {
      const config = SECTION_CONFIG[examType]?.[sectionKey];
      if (!config) return;

      const payload = { examType, sectionKey };

      if (config.titleId) {
        payload.title =
          document.getElementById(config.titleId)?.value || "";
      }
      if (config.itemsId) {
        payload.items = linesToArray(
          document.getElementById(config.itemsId)?.value || ""
        );
      }

      if (examType === "UPSC" && sectionKey === "syllabus") {
        payload.prelimsPercent =
          Number(
            document.getElementById("upsc_syllabus_prelimsPercent")?.value ||
              0
          );
        payload.mainsPercent =
          Number(
            document.getElementById("upsc_syllabus_mainsPercent")?.value || 0
          );
      }

      if (examType === "JEE" && sectionKey === "syllabus") {
        payload.phyPercent =
          Number(
            document.getElementById("jee_syllabus_phyPercent")?.value || 0
          );
        payload.chemPercent =
          Number(
            document.getElementById("jee_syllabus_chemPercent")?.value || 0
          );
        payload.mathPercent =
          Number(
            document.getElementById("jee_syllabus_mathPercent")?.value || 0
          );
      }

      if (examType === "NEET" && sectionKey === "syllabus") {
        payload.phyPercent =
          Number(
            document.getElementById("neet_syllabus_phyPercent")?.value || 0
          );
        payload.chemPercent =
          Number(
            document.getElementById("neet_syllabus_chemPercent")?.value || 0
          );
        payload.bioPercent =
          Number(
            document.getElementById("neet_syllabus_bioPercent")?.value || 0
          );
      }

      if (examType === "RPSC" && sectionKey === "syllabus") {
        payload.gsPercent =
          Number(
            document.getElementById("rpsc_syllabus_gsPercent")?.value || 0
          );
        payload.rajPercent =
          Number(
            document.getElementById("rpsc_syllabus_rajPercent")?.value || 0
          );
        payload.optPercent =
          Number(
            document.getElementById("rpsc_syllabus_optPercent")?.value || 0
          );
      }

      try {
        const form = new URLSearchParams();
        form.append("action", "saveDashboardSection");
        form.append("payload", JSON.stringify(payload));

        const res = await fetch(SCRIPT_URL, {
          method: "POST",
          body: form
        });

        const result = await res.json();
        const msgEl = document.getElementById(config.msgId);
        if (result && result.success) {
          showMessageElement(msgEl, "Saved", false);

          // success ke baad form clear
          if (config.titleId) {
            const t = document.getElementById(config.titleId);
            if (t) t.value = "";
          }
          if (config.itemsId) {
            const ta = document.getElementById(config.itemsId);
            if (ta) ta.value = "";
          }
        } else {
          showMessageElement(
            msgEl,
            result.message || "Failed to save",
            true
          );
        }
      } catch (err) {
        console.error("Error saving section", examType, sectionKey, err);
        const msgEl = document.getElementById(config.msgId);
        showMessageElement(msgEl, "Error while saving", true);
      }
    }

    async function loadDashboardContent(examType) {
      try {
        const res = await fetch(
          SCRIPT_URL +
            "?action=getDashboardContent&examType=" +
            encodeURIComponent(examType)
        );
        const data = await res.json();
        if (!data || !data.success || !data.payload) return;
        const p = data.payload;

        const cfgExam = SECTION_CONFIG[examType];
        if (!cfgExam) return;

        Object.keys(cfgExam).forEach((sectionKey) => {
          const cfg = cfgExam[sectionKey];
          const sectionData = p[sectionKey] || {};

          if (cfg.titleId && sectionData.title !== undefined) {
            const el = document.getElementById(cfg.titleId);
            if (el) el.value = sectionData.title || "";
          }
          if (cfg.itemsId && Array.isArray(sectionData.items)) {
            const el = document.getElementById(cfg.itemsId);
            if (el) el.value = (sectionData.items || []).join("\n");
          }

          if (sectionKey === "syllabus" && cfg.extra) {
            const syl = p.syllabus || {};
            if (examType === "UPSC") {
              document.getElementById(cfg.extra[0]).value =
                syl.prelimsPercent || "";
              document.getElementById(cfg.extra[1]).value =
                syl.mainsPercent || "";
            }
            if (examType === "JEE") {
              document.getElementById(cfg.extra[0]).value =
                syl.phyPercent || "";
              document.getElementById(cfg.extra[1]).value =
                syl.chemPercent || "";
              document.getElementById(cfg.extra[2]).value =
                syl.mathPercent || "";
            }
            if (examType === "NEET") {
              document.getElementById(cfg.extra[0]).value =
                syl.phyPercent || "";
              document.getElementById(cfg.extra[1]).value =
                syl.chemPercent || "";
              document.getElementById(cfg.extra[2]).value =
                syl.bioPercent || "";
            }
            if (examType === "RPSC") {
              document.getElementById(cfg.extra[0]).value =
                syl.gsPercent || "";
              document.getElementById(cfg.extra[1]).value =
                syl.rajPercent || "";
              document.getElementById(cfg.extra[2]).value =
                syl.optPercent || "";
            }
          }
        });
      } catch (err) {
        console.error("Error loading dashboard content for " + examType, err);
      }
    }

    function setupContentTabs() {
      const nav = document.getElementById("contentTabNav");
      nav.querySelectorAll(".nav-link").forEach((btn) => {
        btn.addEventListener("click", () => {
          nav.querySelectorAll(".nav-link").forEach((b) =>
            b.classList.remove("active")
          );
          btn.classList.add("active");

          document
            .querySelectorAll(".content-section")
            .forEach((sec) => sec.classList.add("d-none"));
          const target = btn.getAttribute("data-target");
          if (target) {
            document
              .querySelector(target)
              .classList.remove("d-none");
          }
        });
      });
    }

    document.getElementById("tab-all").addEventListener("click", () => {
      document
        .querySelectorAll(".tab-btn")
        .forEach((b) => b.classList.remove("active"));
      document.getElementById("tab-all").classList.add("active");
      renderRegistrations("all");
    });
    document.getElementById("tab-pending").addEventListener("click", () => {
      document
        .querySelectorAll(".tab-btn")
        .forEach((b) => b.classList.remove("active"));
      document.getElementById("tab-pending").classList.add("active");
      renderRegistrations("pending");
    });
    document.getElementById("tab-approved").addEventListener("click", () => {
      document
        .querySelectorAll(".tab-btn")
        .forEach((b) => b.classList.remove("active"));
      document.getElementById("tab-approved").classList.add("active");
      renderRegistrations("approved");
    });
    document.getElementById("tab-rejected").addEventListener("click", () => {
      document
        .querySelectorAll(".tab-btn")
        .forEach((b) => b.classList.remove("active"));
      document.getElementById("tab-rejected").classList.add("active");
      renderRegistrations("rejected");
    });

    (function init() {
      setupContentTabs();
      loadRegistrations();
      loadDashboardContent("UPSC");
      loadDashboardContent("JEE");
      loadDashboardContent("NEET");
      loadDashboardContent("RPSC");
    })();
  </script>
</body>
</html>
