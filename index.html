<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PrepiFY - Login Portal</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  position: relative;
  color: #ffffff;
  background:
    linear-gradient(135deg, rgba(0,0,0,0.7), rgba(15,23,42,0.9)),
    radial-gradient(circle at top left, #1d4ed8 0, transparent 55%),
    radial-gradient(circle at bottom right, #f97316 0, transparent 55%),
    linear-gradient(135deg, #020617 0%, #0f172a 40%, #111827 100%);
  background-attachment: fixed;
}

/* Optional hero background panel for officer image */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url('OFFICER-WALLPAPER.jpg');
  background-size: cover;
  background-position: center;
  opacity: 0.18;
  pointer-events: none;
  z-index: -2;
}

/* Dark overlay to keep text readable */
body::after {
  content: '';
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at top, rgba(15,23,42,0.7), transparent 60%);
  pointer-events: none;
  z-index: -1;
}

/* TOP CENTER HEADING */
.top-heading {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 56px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-weight: 700;
  color: #ffffff;
  text-shadow: 0 4px 18px rgba(0,0,0,0.7);
  letter-spacing: 2px;
}
.top-heading .gyaan { color: #bfdbfe; }
.top-heading .setu { color: #f97316; }

.hero {
  max-width: 1100px;
  width: 100%;
  display: flex;
  gap: 40px;
  align-items: center; /* dono columns vertically center */
  margin-top: 80px; /* upar heading ke liye space */
}

/* LEFT & RIGHT COLUMNS */
.hero-left,
.hero-right {
  flex: 1;
}

/* Left content ko vertical center ke aas-paas lane ke liye */
.hero-left {
  display: flex;
  flex-direction: column;
  justify-content: center;
  /* is padding/margin ko adjust karke password ke barabar fine-tune kar sakte ho */
  padding-top: 40px;
}

.hero-right .card {
  height: 100%;
}

h1 {
  font-size: 42px;
  margin-bottom: 10px;
}

h1 .gyaan { color: #1e3a8a; }
h1 .setu { color: #dc2626; }

.tagline {
  color: #e5e7ff;
  margin-bottom: 20px;
  font-size: 16px;
  font-style: italic;
}

.card {
  background: rgba(15,23,42,0.96);
  padding: 40px;
  border-radius: 20px;
  box-shadow: 0 24px 80px rgba(0,0,0,0.7);
  max-width: 500px;
  width: 100%;
  margin-left: auto;
  border: 1px solid rgba(148,163,184,0.45);
  backdrop-filter: blur(16px);
}

.card .tagline {
  color: #cbd5f5;
  text-align: center;
  margin-bottom: 20px;
  font-size: 14px;
}

.form-group { margin-bottom: 20px; }

label {
  display: block;
  margin-bottom: 8px;
  color: #e5e7eb;
  font-weight: 600;
  font-size: 14px;
}

input, select, textarea {
  width: 100%;
  padding: 12px 15px;
  border: 2px solid #1e293b;
  border-radius: 10px;
  font-size: 14px;
  transition: all 0.3s;
  font-family: inherit;
  background-color: rgba(15,23,42,0.9);
  color: #e5e7eb;
}

input::placeholder,
textarea::placeholder {
  color: #64748b;
}

input:focus, select:focus, textarea:focus {
  outline: none;
  border-color: #60a5fa;
  box-shadow: 0 0 0 3px rgba(96,165,250,0.25);
}

.btn {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 10px;
}

.btn-primary {
  background: linear-gradient(135deg, #1d4ed8 0%, #7c2d12 100%);
  color: white;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 14px 30px rgba(30,64,175,0.7);
}

.btn-secondary {
  background: rgba(15,23,42,0.9);
  color: #bfdbfe;
  border: 2px solid #60a5fa;
}

.btn-secondary:hover {
  background: #1e293b;
  color: #e5e7eb;
}

.divider {
  text-align: center;
  margin: 30px 0;
  color: #9ca3af;
  position: relative;
}

.divider::before,
.divider::after {
  content: '';
  position: absolute;
  top: 50%;
  width: 40%;
  height: 1px;
  background: #374151;
}

.divider::before { left: 0; }
.divider::after { right: 0; }

.message {
  padding: 12px 15px;
  border-radius: 10px;
  margin-bottom: 20px;
  font-size: 14px;
  display: none;
}
.message.success {
  background: #d4edda;
  color: #155724;
  border: 1px solid #c3e6cb;
}
.message.error {
  background: #f8d7da;
  color: #721c24;
  border: 1px solid #f5c6cb;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background-color: rgba(15,23,42,0.85);
  overflow-y: auto;
}

.modal-content {
  background: #020617;
  margin: 3% auto;
  padding: 0;
  width: 90%;
  max-width: 600px;
  border-radius: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.9);
  animation: slideDown 0.4s ease;
  border: 1px solid #1e293b;
}

@keyframes slideDown {
  from { transform: translateY(-50px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.modal-header {
  background: linear-gradient(135deg, #1d4ed8 0%, #7c2d12 100%);
  color: white;
  padding: 25px 30px;
  border-radius: 20px 20px 0 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-header h2 {
  font-size: 24px;
  font-weight: 700;
}

.close {
  color: white;
  font-size: 35px;
  font-weight: 300;
  cursor: pointer;
  transition: all 0.3s;
}

.close:hover { transform: rotate(90deg); }

.modal-body { padding: 30px; color: #e5e7eb; }

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

@media (max-width: 768px) {
  .hero {
    flex-direction: column;
    margin-top: 100px;
  }
  .card {
    margin: 0 auto;
  }
  .hero-left {
    padding-top: 0;
  }
}
</style>
</head>
<body>

<h1 class="top-heading">
  <span class="gyaan">Prepi</span><span class="setu">FY</span>
</h1>

<div class="hero">
  <div class="hero-left">
    <p class="tagline">Empowering minds, building futures</p>

    <h2 style="color:#e5e7ff; margin: 20px 0 10px; font-size:20px;">
      Our Aim
    </h2>
    <p style="color:#e5e7ff; line-height:1.6; margin-bottom:25px;">
      To guide serious aspirants of UPSC with structured plans,
      disciplined tracking and the right mentorship bridge between effort and success.
    </p>

    <h3 style="color:#fde68a; margin-bottom:8px; font-size:18px;">
      Today’s Motivation
    </h3>
    <p id="dailyQuote" style="color:#e5e7ff; line-height:1.6; font-style:italic;"></p>

    <p style="color:#ffffff; margin-top:20px; font-size:22px; font-weight:700; line-height:1.5;">
      पढ़ लो चाहे कहीं से,<br>
      मंज़िल का रास्ता मिलेगा यहीं से।
    </p>
  </div>

  <div class="hero-right">
    <div class="card">
      <p class="tagline">
        Login to access your personalised dashboard
      </p>

      <div id="messageBox" class="message"></div>

      <!-- STUDENT LOGIN FORM -->
      <form id="loginForm" onsubmit="handleLogin(event)">
        <div class="form-group">
          <label for="userId">User ID</label>
          <input type="text" id="userId" placeholder="Enter your contact number" required>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="Enter your password" required>
        </div>

        <button type="submit" class="btn btn-primary">Login</button>
      </form>

      <div class="divider">OR</div>

      <button class="btn btn-secondary" onclick="openRegistrationForm()">Register Here</button>

      <div style="margin-top: 20px; text-align: center;">
        <button class="btn btn-secondary" onclick="openAdminLogin()">Admin Login</button>
      </div>
    </div>
  </div>
</div>

<!-- REGISTRATION MODAL -->
<div id="registrationModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Student Registration</h2>
      <span class="close" onclick="closeRegistrationModal()">&times;</span>
    </div>
    <div class="modal-body">
      <form id="registrationForm" onsubmit="handleRegistration(event)">
        <div class="form-row">
          <div class="form-group">
            <label for="regName">Full Name</label>
            <input type="text" id="regName" required>
          </div>
          <div class="form-group">
            <label for="regEmail">Email</label>
            <input type="email" id="regEmail" required>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="regContact">Contact Number</label>
            <input type="tel" id="regContact" required>
          </div>
          <div class="form-group">
            <label for="regExam">Preparing For</label>
            <select id="regExam" required>
              <option value="">Select exam</option>
              <option value="UPSC CSE">UPSC CSE</option>
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="regAddress">Address</label>
          <textarea id="regAddress" rows="3" required></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Submit Registration</button>
      </form>
    </div>
  </div>
</div>

<!-- ADMIN LOGIN MODAL -->
<div id="adminLoginModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Admin Login</h2>
      <span class="close" onclick="closeAdminLogin()">&times;</span>
    </div>
    <div class="modal-body">
      <form id="adminLoginForm" onsubmit="handleAdminLogin(event)">
        <div class="form-group">
          <label for="adminEmail">Admin Email</label>
          <input type="email" id="adminEmail" required>
        </div>
        <div class="form-group">
          <label for="adminPassword">Password</label>
          <input type="password" id="adminPassword" required>
        </div>
        <button type="submit" class="btn btn-primary">Login as Admin</button>
      </form>
    </div>
  </div>
</div>

<script>
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyFiEVyWCStmdOxaSz2AAboplrOXAJn0XuW614KRzLihSL60qL8zy3GEgBVvm0DQPcmQg/exec';

const quotes = [
  'Success is the sum of small efforts repeated day in and day out.',
  'Discipline today is freedom tomorrow.',
  'Your only competition is who you were yesterday.',
  'Every hour you study now saves days of regret later.',
  'Consistency beats talent when talent is inconsistent.'
];

function setDailyQuote() {
  const today = new Date();
  const index = today.getDate() % quotes.length;
  const el = document.getElementById('dailyQuote');
  if (el) el.textContent = quotes[index];
}

document.addEventListener('DOMContentLoaded', () => {
  setDailyQuote();
});

function showMessage(text, type) {
  const msgBox = document.getElementById('messageBox');
  msgBox.textContent = text;
  msgBox.className = `message ${type}`;
  msgBox.style.display = 'block';
  setTimeout(() => msgBox.style.display = 'none', 5000);
}

function openRegistrationForm() {
  document.getElementById('registrationModal').style.display = 'block';
}
function closeRegistrationModal() {
  document.getElementById('registrationModal').style.display = 'none';
  document.getElementById('registrationForm').reset();
}
function openAdminLogin() {
  document.getElementById('adminLoginModal').style.display = 'block';
}
function closeAdminLogin() {
  document.getElementById('adminLoginModal').style.display = 'none';
}

window.onclick = function(event) {
  const regModal = document.getElementById('registrationModal');
  const adminModal = document.getElementById('adminLoginModal');
  if (event.target === regModal) regModal.style.display = 'none';
  if (event.target === adminModal) adminModal.style.display = 'none';
};

// ========== REGISTRATION (SINGLE STEP, NO PAYMENT) ==========

function handleRegistration(event) {
  event.preventDefault();

  const name = document.getElementById('regName').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const contact = document.getElementById('regContact').value.trim();
  const exam = document.getElementById('regExam').value;
  const address = document.getElementById('regAddress').value.trim();

  if (!name || !email || !contact || !exam || !address) {
    showMessage('Please fill all required details.', 'error');
    return;
  }

  showMessage('Submitting registration...', 'success');

  const url = `${SCRIPT_URL}?action=register` +
    `&name=${encodeURIComponent(name)}` +
    `&email=${encodeURIComponent(email)}` +
    `&contact=${encodeURIComponent(contact)}` +
    `&exam=${encodeURIComponent(exam)}` +
    `&address=${encodeURIComponent(address)}`;

  fetch(url)
    .then(response => response.json())
    .then(data => {
      if (!data.success) {
        showMessage(data.message || 'Registration failed. Please try again.', 'error');
        return;
      }

      showMessage('Registration successful! Please wait for verification email.', 'success');
      document.getElementById('registrationForm').reset();
      setTimeout(() => closeRegistrationModal(), 1500);
    })
    .catch(error => {
      showMessage('Error submitting registration. Please try again.', 'error');
      console.error('Error:', error);
    });
}

// ========== STUDENT LOGIN ==========

function handleLogin(event) {
  event.preventDefault();

  const userId = document.getElementById('userId').value.trim();
  const password = document.getElementById('password').value.trim();

  showMessage('Verifying credentials...', 'success');

  const url = `${SCRIPT_URL}?action=login` +
    `&userId=${encodeURIComponent(userId)}` +
    `&password=${encodeURIComponent(password)}`;

  fetch(url)
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        const user = data.user;

        localStorage.setItem('userId', user.userId);
        localStorage.setItem('name', user.name);
        localStorage.setItem('exam', user.preparingFor);

        showMessage('Login successful! Redirecting...', 'success');

        setTimeout(() => {
          switch (user.preparingFor) {
            case 'UPSC CSE':
              window.location.href = 'upsc-dashboard.html';
              break;
            default:
              showMessage('Unknown exam type in your profile.', 'error');
          }
        }, 1500);
      } else {
        showMessage(data.message || 'Invalid credentials.', 'error');
      }
    })
    .catch(error => {
      showMessage('Error during login. Please try again.', 'error');
      console.error('Error:', error);
    });
}

// ========== ADMIN LOGIN ==========

function handleAdminLogin(event) {
  event.preventDefault();

  const email = document.getElementById('adminEmail').value.trim();
  const password = document.getElementById('adminPassword').value.trim();

  showMessage('Verifying admin credentials...', 'success');

  const url = `${SCRIPT_URL}?action=adminLogin` +
    `&email=${encodeURIComponent(email)}` +
    `&password=${encodeURIComponent(password)}`;

  fetch(url)
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        localStorage.setItem('isAdmin', 'true');
        localStorage.setItem('adminEmail', data.admin.email);

        showMessage('Admin login successful! Redirecting...', 'success');

        setTimeout(() => {
          window.location.href = 'admin.html';
        }, 1500);
      } else {
        showMessage(data.message || 'Admin login failed.', 'error');
      }
    })
    .catch(error => {
      showMessage('Error during admin login. Please try again.', 'error');
      console.error('Error:', error);
    });
}
</script>
</body>
</html>
